<script>
$( document ).ready(function() {
	
	var sensor_id = localStorage.getItem("editSensorID"); 
	var store_id = localStorage.getItem("editStoreID");
	var departure_id = localStorage.getItem("editDepartureID");
	var manufacturer = localStorage.getItem("editManufacturer");
	var sensortype = localStorage.getItem("editSensorType");
	var hardware_id = localStorage.getItem("editHardwareID");
	var logical_id = localStorage.getItem("editLogicalID");
	var status = localStorage.getItem("editStatus");
	var gateway = localStorage.getItem("editGateway");

	var store_name = localStorage.getItem("editStoreName");
	var departure_name = localStorage.getItem("editDepartureName");
	var sensor_name = localStorage.getItem("editSensorName");	
	
	 alert("editSensorID  " +sensor_id +"\n" 
			 + "editStoreID  " +store_id+ "\n" +
			 "editDepartureID  " +departure_id+ "\n" +
			 "editManufacturer  " +manufacturer+ "\n" +
			 "editSensorType  " +sensortype+ "\n" +
			 "Hardware_ID  " +hardware_id+ "\n" +
			 "LogicalID  " +logical_id+ "\n" +
			 "editStatus  " +status+ "\n" +
			 "editStoreName  " +store_name+ "\n" +
			 "editDepartureName  " +departure_name+ "\n" +
			 "SensorName  " + sensor_name+ "\n" +
			 "gateway  " + gateway);
	
	selectContent(sensor_id,store_id,departure_id,manufacturer,sensortype,hardware_id,logical_id,status,store_name,departure_name,sensor_name,gateway);
});


function selectContent(sensor_id,store_id,departure_id,manufacturer,sensortype,hardware_id,logical_id,status,store_name,departure_name,sensor_name,gateway){
	
	//Es wird eine Verzoegerung ben√∂tigt, da der Content sonst nicht immer gesetzt wird	
		setTimeout(wait, 20);
		function wait(){
				
			editSensorForm.editHardwareID.value=hardware_id;
			editSensorForm.editLogicalID.value=logical_id;

			editSensorForm.editStoreId.value=store_id;
			editSensorForm.editDepartureId.value=departure_id;
			editSensorForm.editSensorId.value=sensor_id;  
			
			  $('#editManufacturer').val(manufacturer);
			  $('#editSensortype').val(sensortype);
			  $('#editStati').val(status);
			  $('#editGateway').val(gateway);
			 
	
			  showContentStoreDepartureSensor(store_name,departure_name,sensor_name);
			  
			}			
}



function showContentStoreDepartureSensor(store_name,departure_name,sensor_name) {
$( "p" ).html("");
$( "p" ).append("Markt: " + store_name);
$( "p" ).append("<br>");
$( "p" ).append("Abteilung: " + departure_name);
$( "p" ).append("<br>");
$( "p" ).append("Sensor: " + sensor_name);
}


function showSensortypeContent() {
	 
	 if($( "#editManufacturer option:selected").text() == "Bitte Hersteller auswaehlen"){
		   	
		 	$('#editSensortype').val("Bitte Sensortyp auswaehlen");
		 	$('#editStati').val("Bitte Status auswaehlen");
		 	$('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 	
		 	 editSensorForm.editHardwareID.value='';
		 	
		 	 document.getElementById('divEditSensortype').style.display = 'none';
		   	 document.getElementById('divEditHardwareID').style.display = 'none';
		   	 document.getElementById('divEditLogicalID').style.display = 'none';
		   	 document.getElementById('divEditStati').style.display = 'none';
		   	 document.getElementById('divEditGateway').style.display = 'none';
		   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';	   	 
   }
	 else{
		 
		     $('#editSensortype').val("Bitte Sensortyp auswaehlen");
		 	 $('#editStati').val("Bitte Status auswaehlen"); 
		 	 $('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 	 editSensorForm.editHardwareID.value='';
		 
		 document.getElementById('divEditSensortype').style.display = '';
	   	 document.getElementById('divEditHardwareID').style.display = 'none';
	   	 document.getElementById('divEditLogicalID').style.display = 'none';
	   	 document.getElementById('divEditStati').style.display = 'none';
	   	 document.getElementById('divEditGateway').style.display = 'none';
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	}
	 
	
}

function showHardwareIDContent() {
	
	 if($( "#editSensortype option:selected").text() == "Bitte Sensortyp auswaehlen"){
		 
		 	$('#editStati').val("Bitte Status auswaehlen");
		 	$('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 	
		 	editSensorForm.editHardwareID.value='';
		 
		   	 document.getElementById('divEditHardwareID').style.display = 'none';
		   	 document.getElementById('divEditLogicalID').style.display = 'none';
		   	 document.getElementById('divEditStati').style.display = 'none';
		   	 document.getElementById('divEditGateway').style.display = 'none';
		   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
  }
	else{
		
			$('#editStati').val("Bitte Status auswaehlen");
			$('#editGateway').val("Bitte MQTT Gateway auswaehlen");
	 		editSensorForm.editHardwareID.value='';
	 		
	   	 document.getElementById('divEditHardwareID').style.display = '';
	   	 document.getElementById('divEditLogicalID').style.display = 'none';
	   	 document.getElementById('divEditStati').style.display = 'none';
	   	 document.getElementById('divEditGateway').style.display = 'none';
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	} 
}

function showStatus() {
	 
	 if ( document.getElementById('editHardwareID').value.length <= 0) {
		 
		 $('#editStati').val("Bitte Status auswaehlen");
		 $('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 
	   	 document.getElementById('divEditLogicalID').style.display = 'none';
	   	 document.getElementById('divEditStati').style.display = 'none';
	   	 document.getElementById('divEditGateway').style.display = 'none';
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	 }
	 else{
		 
		 $('#editStati').val("Bitte Status auswaehlen");
		 $('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 
	   	 document.getElementById('divEditLogicalID').style.display = '';
	   	 document.getElementById('divEditStati').style.display = '';
	   	 document.getElementById('divEditGateway').style.display = 'none';
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	 }
	 
}


function showGateway() {
	 
	if($( "#editStati option:selected").text() == "Bitte Status auswaehlen"){
		 $('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 document.getElementById('divEditGateway').style.display = 'none';
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	 }
	 else{ 	
		 $('#editGateway').val("Bitte MQTT Gateway auswaehlen");
		 document.getElementById('divEditGateway').style.display = '';
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	 }
	 
}


function showButtonEditSensorInDB() {
	 
	if($( "#editStati option:selected").text() == "Bitte MQTT Gateway auswaehlen"){
	   	 document.getElementById('divEditWriteSensorInDB').style.display = 'none';
	 }
	 else{ 	
		 document.getElementById('divEditWriteSensorInDB').style.display = '';
	 }
	 
}



</script>

<h1 class="page-header">Sensor updaten</h1>
<p></p>
<form name="editSensorForm" role="form">
       

<div id="divEditManufacturer" class="form-group" align="right">  
<h3>Hersteller aendern</h3> 
<select id="editManufacturer" class="form-control" onchange="showSensortypeContent()">
    		<option selected>Bitte Hersteller auswaehlen</option>   		
    		<option>Endiio</option>
    		<option>EnOcean</option>
</select>  
</div>
<div id="divEditSensortype" class="form-group" align="right">   
<h3>Sensortyp aendern</h3>
<select id="editSensortype" class="form-control" onchange="showHardwareIDContent()">
    		<option selected>Bitte Sensortyp auswaehlen</option>	
    		<option>Temperatursensor</option>
    		<option>Feuchtigkeitssensor</option>
</select>    
</div>

<div id="divEditHardwareID" class="form-group" align="right">   
<h3>Hardware ID aendern</h3>
           <input type="text" name="editHardwareID" id="editHardwareID" class="form-control" placeholder="Hardware ID des Sensors eintragen" oninput="showStatus()"/> 
</div>

<div id="divEditLogicalID" class="form-group" align="right">   
<h3>Logische ID (automatisch generiert) - nicht aenderbar</h3>
           <input type="text" name="editLogicalID" id="editLogicalID" class="form-control" readonly/> 
</div>
 
<div id="divEditStati" class="form-group" align="right">   
<h3>Status aendern</h3>
<select id="editStati" class="form-control" onchange="showGateway()">
    		<option selected>Bitte Status auswaehlen</option>	
    		<option>aktiv</option>
    		<option>passiv</option>
</select>    
</div>
<div id="divEditGateway" class="form-group" align="right">   
<h3>MQTT Gateway auswaehlen</h3>
<select id="editGateway" class="form-control" onchange="showButtonEditSensorInDB()">
    		<option selected>Bitte MQTT Gateway auswaehlen</option>	
    		<option>yowhanpi.ddns.net:1883</option>
    		<option>iot.eclipse.org:1883</option>
</select>    
</div>
<br><br>
<div id="divEditWriteSensorInDB"  class="form-group">
<h5>Store ID</h5>
            <input type="text" name="editStoreId" id="editStoreId" class="form-control" readonly />   	
<h5>Departure ID</h5>
             <input type="text" name="editDepartureId" id="editDepartureId" class="form-control" readonly />
<h5>Sensor ID</h5>
            <input type="text" name="editSensorId" id="editSensorId" class="form-control" readonly />   
<br><br>            
<button type="button" id="btnEditSensorInDB" class="btn btn-default btn-lg">Sensor updaten</button>
</div>
</form>

<!-- Custom Theme JavaScript -->
<script src="js/Sensors.js"></script>